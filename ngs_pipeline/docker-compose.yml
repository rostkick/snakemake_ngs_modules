version: '3.9'

services:

  deps:
    build: ./ngs-deps/
    image: deps

  final:
    build: .
    image: final
    stdin_open: true
    tty: true
    volumes:
      - './data/:/usr/ngs/data/'
      - './results/:/usr/ngs/results/'
    command: >
      bash -c "snakemake -s pipeline/snakefile.smk -c 1 -j 1 -n -p &&
      tail -f /dev/null"
